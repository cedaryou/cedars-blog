---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

function formatDate(date: Date): string {
  return date.toLocaleDateString("en-US", {
    year: "numeric",
    month: "short",
    day: "numeric",
  });
}
---

<BaseLayout title="cedar's blog" description="Welcome to cedar's blog">
  <h2 class="section-header">recent posts</h2>

  {
    posts.length > 0 ? (
      <ul class="blog-list">
        {posts.map((post) => (
          <li>
            <a href={`/blog/${post.slug}`}>{post.data.title}</a>
            <span class="post-date">{formatDate(post.data.pubDate)}</span>
          </li>
        ))}
      </ul>
    ) : (
      <p>No posts yet. Check back soon!</p>
    )
  }

  <h2 class="section-header">about this blog</h2>
  <p>
    This is my personal blog where I share my thoughts and ideas.
  </p>
</BaseLayout>
